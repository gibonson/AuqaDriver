{% extends 'base.html' %}

{% block title %}
archiveSearch
{% endblock %}


{% block content %}
<div class="text-center">
    <h1 class="h2 mb-3 font-weight-normal">archiveSearch</h1>
    <div class="container">
    
        <form method="POST" class="form-register" style="color:white" novalidate>

            {{ form.hidden_tag() }}

            {{ form.limit.label() }}
            {{ form.limit(class="form-control" , placeholder = 'limit:') }}
            <small class="form-text text-danger">{{ form.limit.errors[0] }}</small>

            {{ form.timestampStart.label() }}
            {{ form.timestampStart(class="form-control" ,  value = datetime.now().strftime("%Y-%m-%d %H:%M")) }}
            <small class="form-text text-danger">{{ form.timestampStart.errors[0] }}</small>

            {{ form.timestampEnd.label() }}
            {{ form.timestampEnd(class="form-control" , value = dataSubOneDay) }}
            <small class="form-text text-danger">{{ form.timestampEnd.errors[0] }}</small>

            {{ form.deviceId.label() }}
            {{ form.deviceId(class="form-control" , placeholder = 'deviceId:') }}
            <small class="form-text text-danger">{{ form.deviceId.errors[0] }}</small>

            {{ form.addInfo.label() }}
            {{ form.addInfo(class="form-control" , placeholder = 'addInfo:') }}
            <small class="form-text text-danger">{{ form.addInfo.errors[0] }}</small>

            {{ form.unit.label() }}
            {{ form.unit(class="form-control" , placeholder = 'unit:') }}
            <small class="form-text text-danger">{{ form.unit.errors[0] }}</small>

            <br>

            {{ form.submit(class="btn btn-lg btn-block btn-primary") }}

        </form>

    </div>
</div>


<div class="text-center">
    <h1 class="h2 mb-3 font-weight-normal">archiveList</h1>
    <div class="container">
        <div class="table-responsive">
            <table class="table table-striped table-dark" style="width: 100%">
                <tr>
                    <th>id</th>
                    <th>timestamp</th>
                    <th>deviceId</th>
                    <th>addInfo</th>
                    <th>value</th>
                    <th>unit</th>
                </tr>
                {% for archiveRow in archive %}
                <tr>    
                    <td>{{archiveRow.id}}</td>
                    <td>{{datetime.fromtimestamp(archiveRow.timestamp).strftime("%Y-%m-%d %H:%M:%S")}}</td>
                    <td>{{archiveRow.deviceId}}</td>
                    <td>{{archiveRow.addInfo}}</td>
                    <td>{{archiveRow.value}}</td>
                    <td>{{archiveRow.unit}}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</div>
{% endblock %}