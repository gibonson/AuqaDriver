{% extends 'base.html' %}

{% block title %}
AquaDriver - Notification List
{% endblock %}


{% block content %}
<h1>Validation List</h1>
<p>
    <button class="btn btn-info w-100" type="button" data-bs-toggle="collapse" data-bs-target="#form"
        aria-expanded="false" aria-controls="collapseExample">
        Add Notification
    </button>
</p>
<div class="collapse" id="form">
    <div class="card card-body">
        <form method="POST" class="form-register" style="color:white" novalidate>

            {{ form.hidden_tag() }}
            <table>

                <tr>
                    <td>
                        {{ form.description.label() }}
                    </td>
                    <td>
                        {{ form.description(class="form-control" , placeholder = 'description') }}
                        <small class="form-text text-danger">{{ form.description.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.deviceIP.label() }}
                    </td>
                    <td>
                        {{ form.deviceIP(class="form-control" , placeholder = 'deviceIP') }}
                        <small class="form-text text-danger">{{ form.deviceIP.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.deviceName.label() }}
                    </td>
                    <td>
                        {{ form.deviceName(class="form-control" , placeholder = 'deviceName') }}
                        <small class="form-text text-danger">{{ form.deviceName.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.addInfo.label() }}
                    </td>
                    <td>
                        {{ form.addInfo(class="form-control" , placeholder = 'addInfo') }}
                        <small class="form-text text-danger">{{ form.addInfo.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.type.label() }}
                    </td>
                    <td>
                        {{ form.type(class="form-control" , placeholder = 'type') }}
                        <small class="form-text text-danger">{{ form.type.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.condition.label() }}
                    </td>
                    <td>
                        {{ form.condition(class="form-select" , placeholder = 'condition') }}
                        <small class="form-text text-danger">{{ form.condition.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.value.label() }}
                    </td>
                    <td>
                        {{ form.value(class="form-control" , placeholder = 'value') }}
                        <small class="form-text text-danger">{{ form.value.errors[0] }}</small>
                    </td>
                </tr>

                <tr>
                    <td>
                        {{ form.status.label() }}
                    </td>
                    <td>
                        {{ form.status(class="form-select" , placeholder = 'status') }}
                        <small class="form-text text-danger">{{ form.status.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.actionType.label() }}
                    </td>
                    <td>
                        {{ form.actionType(class="form-select" , placeholder = 'actionType') }}
                        <small class="form-text text-danger">{{ form.actionType.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.eventId.label() }}
                    </td>
                    <td>
                        {{ form.eventId(class="form-control" , placeholder = 'eventId') }}
                        <small class="form-text text-danger">{{ form.eventId.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ form.message.label() }}
                    </td>
                    <td>
                        {{ form.message(class="form-control" , placeholder = 'message') }}
                        <small class="form-text text-danger">{{ form.message.errors[0] }}</small>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"></td>
                </tr>
            </table>
            {{ form.submit(class="btn btn-lg btn-block btn-primary") }}
        </form>

    </div>
    </br>
</div>
<table class="table table-striped table-dark  table-fixed" style="width: 100%">
    <thead>
        <tr>
            <th>#</th>
            <th>Description</th>
            <th>Device IP</th>
            <th>Device Name</th>
            <th>Additional Info</th>
            <th>Type</th>
            <th>Condition</th>
            <th>Value</th>
            <th>validation Type</th>
            <th>Event ID</th>
            <th>Message</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for validation in validationList %}
        <tr>
            <td>{{validation.id}}</td>
            <td>{{validation.description}}</td>
            <td>{{validation.deviceIP}}</td>
            <td>{{validation.deviceName}}</td>
            <td>{{validation.addInfo}}</td>
            <td>{{validation.type}}</td>
            <td>{{validation.condition}}</td>
            <td>{{validation.value}}</td>
            <td>{{validation.actionType}}</td>
            <td>{{validation.eventId}}</td>
            <td>{{validation.message}}</td>
            <td>{{validation.status}}</td>
            <td>
                <div class="btn-group">
                    <a href="{{url_for('change_validation_status',id=validation.id)}}"
                        class="btn btn-warning btn-lg active" role="button" aria-pressed="true">Change
                        Status</a>
                    <a href="{{url_for('remove_validation',id=validation.id)}}" class="btn btn-danger btn-lg active"
                        role="button" aria-pressed="true">Remove</a>

                    <button type="button" class="btn btn-info btn-lg active" data-bs-toggle="modal"
                        data-bs-target="#eventValidationEdit{{ validation.id }}">Edit</button>
                </div>
            </td>

            <!-- Modal -->
            <div class="modal fade" id="eventValidationEdit{{ validation.id }}" tabindex="-1"
                aria-labelledby="eventValidationEditLabel{{ validation.id }}" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="eventValidationEditLabel{{ validation.id }}">Edit Event {{
                                validation.id }}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form method="POST" action="{{ url_for('event_validation_edit', id=validation.id) }}">
                            <div class="modal-body">

                                {{ form.hidden_tag() }}
                                <div class="mb-3">
                                    {{ form.description.label(class="form-label") }}
                                    {{ form.description(class="form-control", value=validation.description) }}
                                    <small class="form-text text-danger">{{ form.description.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.deviceIP.label(class="form-label") }}
                                    {{ form.deviceIP(class="form-control", value=validation.deviceIP) }}
                                    <small class="form-text text-danger">{{ form.deviceIP.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.deviceName.label(class="form-label") }}
                                    {{ form.deviceName(class="form-control", value=validation.deviceName) }}
                                    <small class="form-text text-danger">{{ form.deviceName.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.addInfo.label(class="form-label") }}
                                    {{ form.addInfo(class="form-control", value=validation.addInfo) }}
                                    <small class="form-text text-danger">{{ form.addInfo.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.type.label(class="form-label") }}
                                    {{ form.type(class="form-control", value=validation.type) }}
                                    <small class="form-text text-danger">{{ form.type.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.condition.label(class="form-label") }}
                                    {{ form.condition(class="form-control", value=validation.condition) }}
                                    <small class="form-text text-danger">{{ form.condition.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.value.label(class="form-label") }}
                                    {{ form.value(class="form-control", value=validation.value) }}
                                    <small class="form-text text-danger">{{ form.value.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.actionType.label(class="form-label") }}
                                    {{ form.actionType(class="form-control", value=validation.actionType) }}
                                    <small class="form-text text-danger">{{ form.actionType.errors[0] }}</small>
                                </div>

                                <div class="mb-3">
                                    {{ form.eventId.label(class="form-label") }}
                                    {{ form.eventId(class="form-control", value=validation.eventId) }}
                                    <small class="form-text text-danger">{{ form.eventId.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.message.label(class="form-label") }}
                                    {{ form.message(class="form-control", value=validation.message) }}
                                    <small class="form-text text-danger">{{ form.message.errors[0] }}</small>
                                </div>
                                <div class="mb-3">
                                    {{ form.status.label(class="form-label") }}
                                    {{ form.status(class="form-control", value=validation.status) }}
                                    <small class="form-text text-danger">{{ form.status.errors[0] }}</small>
                                </div>


                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save changes</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}