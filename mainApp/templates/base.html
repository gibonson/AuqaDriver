<!doctype html>
<html lang="en">

<head>
   <link rel="icon" type="image/png" href="/static/LogoBIG.png" sizes="16x16">
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <!-- Bootstrap CSS and JS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

   <!-- Font Awesome -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

   <title>{% block title %}{% endblock %}</title>

   <style>
      table,
      form {
         width: 100%;
      }

      .card {
         background-color: #383838;
         color: white;
      }

      th,
      td {
         width: 10%;
         padding: 8px;
         text-align: left;
         border-top: 1px solid #ddd;
      }

      .modal-content {
         background-color: #212121;
      }
   </style>
</head>

<body class="p-3 m-0 border-0 bd-example m-0 border-0">

   <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-2">

      <a class="navbar-brand me-3" href="{{ url_for('dashboard') }}">
         <img src="/static/LogoBIG.png" alt="Logo" width="45">
      </a>

      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav">
         <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="nav">
         <ul class="navbar-nav gap-2">

            {# ---- Scheduler ---- #}
            {% set scheduler = {
            "1": ("success", "RUNNING", "pause", "Pause", "pause"),
            "2": ("warning", "PAUSED", "resume", "Resume", "play")
            }.get(state) %}

            <li class="nav-item dropdown">
               {% if scheduler %}
               <a class="btn btn-{{ scheduler[0] }} btn-lg dropdown-toggle" data-bs-toggle="dropdown">
                  Scheduler: {{ scheduler[1] }}
               </a>
               <ul class="dropdown-menu">
                  <li>
                     <a class="dropdown-item" href="{{ url_for(scheduler[2]) }}">
                        <i class="fa fa-{{ scheduler[4] }}"></i> {{ scheduler[3] }}
                     </a>
                  </li>
               </ul>
               {% else %}
               <span class="btn btn-secondary btn-lg disabled">Status Unknown</span>
               {% endif %}
            </li>

            {# ---- Lists ---- #}
            <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                  <i class="fa fa-list"></i> Lists and Forms
               </a>
               <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{{ url_for('event_list') }}"><i class="fa fa-gears"></i> Event</a>
                  </li>
                  <li><a class="dropdown-item" href="{{ url_for('report_list') }}"><i class="fa fa-calendar"></i>
                        Report</a></li>
                  <li><a class="dropdown-item" href="{{ url_for('scheduler_list') }}"><i class="fa fa-clock-o"></i>
                        Scheduler</a></li>
                  <li><a class="dropdown-item" href="{{ url_for('validation_list') }}"><i class="fa fa-bell-o"></i>
                        Validation</a></li>
               </ul>
            </li>

            {# ---- Admin ---- #}
            <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                  <i class="fa fa-server"></i> Admin space
               </a>
               <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{{ url_for('get_jobs') }}"><i class="fa fa-cog"></i> Jobs</a></li>
                  <li><a class="dropdown-item" href="{{ url_for('email_send') }}"><i class="fa fa-envelope"></i>
                        Email</a></li>
                  <li><a class="dropdown-item" href="{{ url_for('get_logs') }}"><i class="fa fa-file-text"></i> Logs</a>
                  </li>
                  <li><a class="dropdown-item" href="{{ url_for('get_report_all') }}"><i class="fa fa-table"></i>
                        Reports</a></li>
                  <li><a class="dropdown-item" href="{{ url_for('pushover_test') }}"><i class="fa fa-table"></i>
                        pushover_test</a></li>
                  <li><a class="dropdown-item" href="{{ url_for('archive_add_manually') }}"><i
                           class="fa fa-hand-spock-o"></i> Add</a></li>
               </ul>
            </li>

            <li class="nav-item">
               <a class="nav-link" href="{{ url_for('archive_search') }}">
                  <i class="fa fa-search"></i> Archive Search
               </a>
            </li>

         </ul>

         <span class="navbar-text ms-auto">host: {{ hostname }}</span>
      </div>
   </nav>

   <div class="container" style="margin-top:40px;">
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      {% for category, message in messages %}
      <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
         <strong>{{ message }}</strong>
         <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endfor %}
      {% endif %}
      {% endwith %}
   </div>

   <div class="container">
      <div class="text-center overflow-scroll">
         {% block content %}
         {% endblock %}
      </div>
   </div>

   <div class="text-center p-4 bg-dark margin-top-4">
      Â© 2024 Copyright: Jakub Palica
   </div>

   <style>
      body {
         background-color: #212121;
         color: white;
      }
   </style>
   <script>
      // tooltip initialization
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
   </script>
   <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
   <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
   <script>
      $(document).ready(function () {
         $('#sortingTable').DataTable({
            "order": [[0, "desc"]],   // default sort column index and direction
            "pageLength": 25
         });
      });
   </script>
</body>
</html>